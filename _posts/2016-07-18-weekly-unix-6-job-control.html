---
layout: single
title: 'Weekly Unix #6 - job control'
date: 2016-07-18 13:52:06.000000000 +05:30
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Linux
tags: []
meta:
  _publicize_pending: '1'
  _edit_last: '44162397'
  _pt_cv_view_count: '177'
  dpsp_networks_shares: a:2:{s:11:"google-plus";i:0;s:9:"pinterest";i:0;}
  original_post_id: '138'
  _wp_old_slug: '138'
author:
  login: sureshsarda
  email: sureshssarda@gmail.com
  display_name: Suresh Sarda
  first_name: ''
  last_name: ''
---
<p>Some commands take long time to finish execution. For example if you are searching for a file in a directory or extracting/compressing a directory or maybe building a project which take quite some time to complete. The command when executed takes a while to complete and thereby occupy the terminal preventing you from doing other stuff.</p>
<p>Linux (since a multitasking operating system) offers neat job control tools to deal with this.</p>
<p>The most basic which most of us know is adding <code>&amp;</code> after the command. It makes the job run in background. Like this:</p>
<pre><code class="bash hljs ">find . -name somefile.xml &amp;
</code></pre>
<p>That’s okay but what if you want to check the status of this command? Or what if you forgot adding the <code>&amp;</code> or what if you thought it will get executed quickly but it’s taking some time and you need the terminal?</p>
<p>The following set of tools will help you with all these problems.</p>
<h3 id="suspending-and-terminating-job">Suspending and terminating job</h3>
<table>
<thead>
<tr>
<th>Task</th>
<th>Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td>Suspend job</td>
<td>^Z (Control-Z)</td>
</tr>
<tr>
<td>Terminate job</td>
<td>^C (Control-C)</td>
</tr>
</tbody>
</table>
<p>The table is self explanatory.</p>
<h3 id="putting-a-job-in-background">Putting a job in background</h3>
<p>If you have already started a job and wish to put it in background, first suspend it and execute <code>bg</code>.<br />
For example:</p>
<pre><code class="bash hljs "><span class="hljs-variable">$find</span> . -name somefile.xml
^Z
<span class="hljs-variable">$bg</span>
$ &lt;you have console <span class="hljs-keyword">for</span> your next task&gt;
</code></pre>
<h3 id="listing-all-the-jobs">Listing all the jobs</h3>
<p>Executing <code>jobs</code> prints a list of all the available jobs.</p>
<pre><code class="bash hljs "><span class="hljs-variable">$jobs</span>
[<span class="hljs-number">1</span>]   Running                 find . -name *.xml &gt; /dev/null &amp;
[<span class="hljs-number">2</span>]-  Stopped                 cat /dev/zero &gt; /dev/null
[<span class="hljs-number">3</span>]+  Stopped                 find . -name *.cc &gt; /dev/null
</code></pre>
<p>The number in square brackets is the job number followed by status and followed by the command used to execute.</p>
<p><code>+(plus)</code> and <code>-(minus)</code> denote current and previous jobs respectively. <em>Current Job</em> is the last job stopped while it was in foreground or started in background. This is the default job for <code>bg</code> and <code>fg</code> commands. Whereas <em>previous job</em> is the one before that. A detailed article on job reference can be found <a href="http://sureshsarda.in/2016/07/19/weekly-unix-6-job-control-2/">here.</a></p>
<h3 id="killing-a-job">Killing a job</h3>
<p>To terminate a job running in background, execute the <code>kill</code> command.</p>
<pre><code class="bash hljs "><span class="hljs-variable">$find</span> . -name *.xml &gt; /dev/null
^Z
[<span class="hljs-number">1</span>]+  Stopped                 find . -name *.xml &gt; /dev/null

<span class="hljs-variable">$kill</span> %N
[<span class="hljs-number">1</span>]+  Stopped                 find . -name *.xml &gt; /dev/null
</code></pre>
<p>Here <code>N</code> is the job number.</p>
<p><em>Note that this applies to jobs running under current shell and to list all other jobs, you will have to use <code>top</code> or <code>ps -aux</code>.</em></p>
<h2 id="tldr">TL;DR</h2>
<p>Run a job in background by adding &amp;. Put a job to background by first suspending it and then typing bg. View all jobs under current shell by executing jobs and kill a job by its number.</p>
<table>
<thead>
<tr>
<th>Task</th>
<th>Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td>Move a suspended job to foreground</td>
<td><code>fg &lt;job_reference&gt;</code></td>
</tr>
<tr>
<td>Move a suspended job to background</td>
<td><code>bg &lt;job_reference&gt;</code></td>
</tr>
<tr>
<td>List all jobs</td>
<td><code>jobs</code></td>
</tr>
<tr>
<td>Kill a job</td>
<td><code>kill &lt;job_reference&gt;</code></td>
</tr>
<tr>
<td>Start a job directly in background</td>
<td><code>command &amp;</code></td>
</tr>
</tbody>
</table>
<p><em>Note that you have to suspend a job before you can do anything.</em></p>
<p>&nbsp;</p>
