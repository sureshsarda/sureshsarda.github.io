<!doctype html><html lang=en-us class=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Safely Rolling Out Features Using Feature Flags | s9a.me</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="In this article we will walk through steps to rollout an upgrade as safely as possible.
What you will need A feature controller A configuration for the feature Infrastructure to deploy canary releases (optional; if you like to play with fire without wearing gloves) Safely Rolling Out Change Create a feature in feature controller for the new feature with default value set to disabled. Write code for the new feature but behind this new condition using the feature controller."><meta name=generator content="Hugo 0.121.2"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&family=Source+Sans+Pro:wght@200;300;400;700;900&display=swap"><meta property="og:title" content="Safely Rolling Out Features Using Feature Flags"><meta property="og:description" content="In this article we will walk through steps to rollout an upgrade as safely as possible.
What you will need A feature controller A configuration for the feature Infrastructure to deploy canary releases (optional; if you like to play with fire without wearing gloves) Safely Rolling Out Change Create a feature in feature controller for the new feature with default value set to disabled. Write code for the new feature but behind this new condition using the feature controller."><meta property="og:type" content="article"><meta property="og:url" content="https://s9a.me/posts/2022-12-28-releasing-safely/"><meta property="og:image" content="https://s9a.me/images/slipbox.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-28T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-30T09:21:13+05:30"><meta property="og:site_name" content="sureshsarda.me"><meta itemprop=name content="Safely Rolling Out Features Using Feature Flags"><meta itemprop=description content="In this article we will walk through steps to rollout an upgrade as safely as possible.
What you will need A feature controller A configuration for the feature Infrastructure to deploy canary releases (optional; if you like to play with fire without wearing gloves) Safely Rolling Out Change Create a feature in feature controller for the new feature with default value set to disabled. Write code for the new feature but behind this new condition using the feature controller."><meta itemprop=datePublished content="2022-12-28T00:00:00+00:00"><meta itemprop=dateModified content="2022-12-30T09:21:13+05:30"><meta itemprop=wordCount content="357"><meta itemprop=image content="https://s9a.me/images/slipbox.jpg"><meta itemprop=keywords content="sdlc,programming,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://s9a.me/images/slipbox.jpg"><meta name=twitter:title content="Safely Rolling Out Features Using Feature Flags"><meta name=twitter:description content="In this article we will walk through steps to rollout an upgrade as safely as possible.
What you will need A feature controller A configuration for the feature Infrastructure to deploy canary releases (optional; if you like to play with fire without wearing gloves) Safely Rolling Out Change Create a feature in feature controller for the new feature with default value set to disabled. Write code for the new feature but behind this new condition using the feature controller."></head><body class="bg-slate-100 dark:bg-slate-900"><main><article class="center bg-white relative max-w-4xl mx-auto px-12 py-16"><header class="border-b-2 mb-8 pb-8"><aside><a href=/ class="font-semibold text-base uppercase text-sky-600 hover:text-sky-900">HOME</a></aside><h1 class="text-5xl my-4">Safely Rolling Out Features Using Feature Flags</h1><div class=mb-4><time class="text-base text-gray-700" datetime=2022-12-28T00:00:00Z>December 28, 2022</time></div><a class="text-sky-600 hover:text-sky-900 mr-2" href=/tags/sdlc>#sdlc
</a><a class="text-sky-600 hover:text-sky-900 mr-2" href=/tags/programming>#programming</a></header><div class=prose><p>In this article we will walk through steps to rollout an upgrade as safely as
possible.</p><h2 id=what-you-will-need>What you will need</h2><ul><li>A feature controller</li><li>A configuration for the feature</li><li>Infrastructure to deploy canary releases (optional; if you like to play with
fire without wearing gloves)</li></ul><h2 id=safely-rolling-out-change>Safely Rolling Out Change</h2><p><img src=9steps.jpg alt="alt An overview of safely rolling out change" title="An overview of safely rolling out change"></p><ol><li>Create a feature in feature controller for the new feature with default value
set to disabled. Write code for the new feature but behind this new condition
using the feature controller. The code is now present, but disabled.</li><li>Release the new binary with the new code. At this stage, the code is present
but behind a flag and currently disabled. A failure at this stage would
require you to revert to the older binaries.</li><li>Now update the configuration files, add the configuration for the feature
but still keep it disabled. The feature should still be inactive and any
failure at this stage would require you to revert to older configuration
file.</li><li>Update the configuration to enable the feature for few canary deployments.
A failed rollout would require terminating the canaries.</li><li>Update the remaining deployments and activate this feature. The chances of
failure at this stage are minimal since the feature is already tested with
canary users.</li><li>Now alter the code such that the default value for the feature is enabled.
This should not make any difference since anyway the configuration was enabled
for this feature. A failed rollout at this stage would require you to move
back to previous binary.</li><li>Update the configuration files and remove references of the feature. The code
is anyway not using this configuration as per step 6.</li><li>Update all code and remove the conditional behaviour around this feature. A
failed rollout would require you to revert to previous version of the binary.</li><li>Remove the code from feature controller.</li></ol><p>These nine steps might be an overkill for they ensure that code is released
smoothly. These steps may span across weeks or months and parallelly for many
features as well.</p><h2 id=read-more>Read More</h2><p><a href=https://research.google/pubs/pub42576/>Making “Push On Green” a Reality: Issues & Actions Involved in Maintaining a Production Service</a></p><hr><p>This is my 5th of 100 post in <a href=https://100daystooffload.com/>#100daysToOffload</a>.</p></div><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://s9a.me/posts/2022-12-28-releasing-safely/&amp;text=Safely%20Rolling%20Out%20Features%20Using%20Feature%20Flags" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://s9a.me/posts/2022-12-28-releasing-safely/&amp;title=Safely%20Rolling%20Out%20Features%20Using%20Feature%20Flags" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"></a></div><aside class=border-t-2><p class=pt-4>Want to discuss this further? You can DM me via
<a class=text-sky-500 href=https://twitter.com/sureshssarda>Twitter</a>,
<a class=text-sky-500 href=https://www.linkedin.com/in/sureshsarda/>LinkedIn</a> or directly drop an
<a class=text-sky-500 href="mailto:sureshssarda@gmail.com?subject=Safely%20Rolling%20Out%20Features%20Using%20Feature%20Flags">Email.</a></p></aside><aside><div class=py-4><p class="text-2xl font-bold">You might want to read</p><ul class="list-disc list-inside my-4"><li><a class="hover:underline hover:text-gray-500" href=/posts/java/2022-12-31-using-separate-source-root-for-integration-tests/>Using a Separate Source Root for Integration Tests</a></li><li><a class="hover:underline hover:text-gray-500" href=/posts/2022-12-21-about-googles-mono-repo/>A brief summary of Google's Monorepo</a></li><li><a class="hover:underline hover:text-gray-500" href=/posts/databases/2022-12-24-fundamental-join-algorithms/>Fundamental Join Algorithms and IO Cost</a></li></ul></div></aside></article></main><footer class="bg-black dark:bg-slate-900 text-white bottom-0 w-100 pa3" role=contentinfo><div class="center relative max-w-4xl mx-auto px-12 py-16"><section class=mb-4><h1 class="text-2xl uppercase hover:text-gray-300 hover:underline"><a href=/about>About</a></h1><p>Hi! I'm Suresh. Your host. You can get to know me better in the
<a class="hover:text-gray-500 hover:underline" href=/about>about</a> section or follow me
using the social media icons on the right</p><div><div class=ananke-socials><a href=https://twitter.com/sureshssarda target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window">Twitter
</a><a href=https://github.com/sureshsarda target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window">GitHub
</a><a href=https://www.linkedin.com/in/sureshsarda/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window">LinkedIn
</a><a href=https://sureshssarda.medium.com/ target=_blank class="medium ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Medium link" rel=noopener aria-label="follow on Medium——Opens in a new window">Medium</a></div></div></section><section class=mb-4><h1 class="text-2xl uppercase hover:text-gray-300 hover:underline"><a href=/categories>categories</a></h1><a class="hover:text-gray-400 hover:underline" href=/categories/linux>linux (6)</a></section><section class=mb-4><h1 class="text-2xl uppercase hover:text-gray-300 hover:underline"><a href=/tags>tags</a></h1><a class="hover:text-gray-400 hover:underline" href=/tags/ai>ai (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-hadoop>apache-hadoop (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-kafka>apache-kafka (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-spark>apache-spark (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-storm>apache-storm (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/big-data>big-data (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/clean-code>clean-code (5)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/containers>containers (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/data>data (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/databases>databases (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/design>design (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/design-patterns>design-patterns (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/docker>docker (4)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/elasticsearch>elasticsearch (5)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/gradle>gradle (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/idea>idea (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/java>java (15)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/linux>linux (12)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/networking>networking (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/note-taking>note-taking (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/notes>notes (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/performance>performance (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/power-unix-tools>power-unix-tools (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/programming>programming (9)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/python>python (3)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/reflection>reflection (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/research-paper>research-paper (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/sdlc>sdlc (3)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/spring>spring (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/testing>testing (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/vscode>vscode (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/writing-well>writing-well (2)</a></section><section class="mb-4 text-gray-400"><a href=https://s9a.me/>&copy; Suresh Sarda 2024</a><p class="text-sm text-gray-500">Hosted on
<a class="hover:text-gray-300 hover:underline" href=https://github.com/sureshsarda/sureshsarda.github.io>Github</a>. Handcrafted using
<a class="hover:text-gray-300 hover:underline" href=https://gohugo.io/>Hugo</a> and
<a class="hover:text-gray-300 hover:underline" href=https://tailwindcss.com/>Tailwind</a>. (Version 17790dc)</p></section></div></div></footer></body></html>