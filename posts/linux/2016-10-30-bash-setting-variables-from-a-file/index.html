<!doctype html><html lang=en-us class=dark><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Bash: Setting variables from a file | s9a.me</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Shell scripts sometimes get overly complicated and we need lot of configurations stored in file instead of setting them in ten different files which not to mention is error prone. A simple technique would be to write all the configurations in a properties file and read it in all the scripts.
Create the variables file For example we have all these configurations we need to set
server.build.ip=10.20.0.17 server.stage.ip=10.20.0.77 server.stage.user=stageuser server.stage.user.sudo=stageadmin server."><meta name=generator content="Hugo 0.109.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&family=Source+Sans+Pro:wght@200;300;400;700;900&display=swap"><meta property="og:title" content="Bash: Setting variables from a file"><meta property="og:description" content="Shell scripts sometimes get overly complicated and we need lot of configurations stored in file instead of setting them in ten different files which not to mention is error prone. A simple technique would be to write all the configurations in a properties file and read it in all the scripts.
Create the variables file For example we have all these configurations we need to set
server.build.ip=10.20.0.17 server.stage.ip=10.20.0.77 server.stage.user=stageuser server.stage.user.sudo=stageadmin server."><meta property="og:type" content="article"><meta property="og:url" content="/posts/linux/2016-10-30-bash-setting-variables-from-a-file/"><meta property="og:image" content="/images/slipbox.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-10-30T00:00:00+00:00"><meta property="article:modified_time" content="2016-10-30T00:00:00+00:00"><meta property="og:site_name" content="sureshsarda.me"><meta itemprop=name content="Bash: Setting variables from a file"><meta itemprop=description content="Shell scripts sometimes get overly complicated and we need lot of configurations stored in file instead of setting them in ten different files which not to mention is error prone. A simple technique would be to write all the configurations in a properties file and read it in all the scripts.
Create the variables file For example we have all these configurations we need to set
server.build.ip=10.20.0.17 server.stage.ip=10.20.0.77 server.stage.user=stageuser server.stage.user.sudo=stageadmin server."><meta itemprop=datePublished content="2016-10-30T00:00:00+00:00"><meta itemprop=dateModified content="2016-10-30T00:00:00+00:00"><meta itemprop=wordCount content="258"><meta itemprop=image content="/images/slipbox.jpg"><meta itemprop=keywords content="linux,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/slipbox.jpg"><meta name=twitter:title content="Bash: Setting variables from a file"><meta name=twitter:description content="Shell scripts sometimes get overly complicated and we need lot of configurations stored in file instead of setting them in ten different files which not to mention is error prone. A simple technique would be to write all the configurations in a properties file and read it in all the scripts.
Create the variables file For example we have all these configurations we need to set
server.build.ip=10.20.0.17 server.stage.ip=10.20.0.77 server.stage.user=stageuser server.stage.user.sudo=stageadmin server."></head><body class="bg-slate-100 dark:bg-slate-900"><main><article class="center bg-white relative max-w-4xl mx-auto px-4 sm:px-12 py-16"><header class="border-b-2 mb-8"><aside><a href=/ class="font-semibold text-base uppercase text-sky-700">HOME</a>
<a href=/category/how-to class="font-semibold text-base uppercase text-sky-700">&bull; HOW TO</a></aside><h1 class="text-5xl my-4">Bash: Setting variables from a file</h1><div class=mb-12><time class="text-base text-gray-700" datetime=2016-10-30T00:00:00Z>October 30, 2016</time></div></header><div class=prose><p>Shell scripts sometimes get overly complicated and we need lot of configurations stored in file instead of setting them in ten different files which not to mention is error prone. A simple technique would be to write all the configurations in a properties file and read it in all the scripts.</p><h2 id=create-the-variables-file>Create the variables file</h2><p>For example we have all these configurations we need to set</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>server.build.ip<span style=color:#f92672>=</span>10.20.0.17
</span></span><span style=display:flex><span>server.stage.ip<span style=color:#f92672>=</span>10.20.0.77
</span></span><span style=display:flex><span>server.stage.user<span style=color:#f92672>=</span>stageuser
</span></span><span style=display:flex><span>server.stage.user.sudo<span style=color:#f92672>=</span>stageadmin
</span></span><span style=display:flex><span>server.stage.log<span style=color:#f92672>=</span>/var/log/logfile.log
</span></span><span style=display:flex><span>server.demo.ip<span style=color:#f92672>=</span>10.20.0.83
</span></span><span style=display:flex><span>server.demo.user<span style=color:#f92672>=</span>demoadmin
</span></span><span style=display:flex><span>server.demo.log<span style=color:#f92672>=</span>/var/log/error.log
</span></span><span style=display:flex><span>config.project<span style=color:#f92672>=</span>/opt/foo/bat/config
</span></span></code></pre></div><p>If we wish to do this in all scripts we will have to write each of these variables in all the scripts and change in one of these variables meaning changing all the scripts.
So we could read this file in a script and execute that script in every shell script.</p><h2 id=executing-and-setting-the-variables>Executing and setting the variables</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>while</span> IFS<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;=&#39;</span> read -r key value
</span></span><span style=display:flex><span><span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    key<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>echo $key | tr <span style=color:#e6db74>&#39;.&#39;</span> <span style=color:#e6db74>&#39;_&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>    eval <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>key<span style=color:#e6db74>}</span><span style=color:#e6db74>=</span><span style=color:#e6db74>${</span>value<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span> &lt; config
</span></span></code></pre></div><p>Assuming that the config information is stored in <code>config</code> file.
Now we could just call this piece of code, or a script that contains this code every time we need these variables.</p><p>What it does is, it reads the file line by line and splits the line at <code>=</code> (see the part: <code>IFS='='</code>?) and assigns the values to <code>key</code>,<code>value</code>.
Next bash variables can not contain a period. So we replace all the periods with underscores.</p><p>After that we simple set the values using the eval statement.</p><hr><p>Done! You have all your variables stored!
For example if we need the IP address of build server we could use: <code>$server_build_ip</code>. Neat!</p></div><a class="text-sky-600 mr-2" href=/tags/linux>#linux</a><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=/posts/linux/2016-10-30-bash-setting-variables-from-a-file/&text=Bash:%20Setting%20variables%20from%20a%20file" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=/posts/linux/2016-10-30-bash-setting-variables-from-a-file/&title=Bash:%20Setting%20variables%20from%20a%20file" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"></a></div><aside><div class="border-t-2 py-4"><p class="text-2xl font-bold">See Also</p><ul><li><a class="hover:underline hover:text-gray-500" href=/posts/linux/2016-07-24-weekly-unix-7-wc/>Weekly Unix #7 - wc</a></li><li><a class="hover:underline hover:text-gray-500" href=/posts/linux/2016-07-19-weekly-unix-6-job-control-2/>Weekly Unix #6 - job control (2)</a></li><li><a class="hover:underline hover:text-gray-500" href=/posts/linux/2016-07-18-weekly-unix-6-job-control/>Weekly Unix #6 - job control</a></li></ul></div></aside></article></main><footer class="bg-black dark:bg-slate-900 text-white bottom-0 w-100 pa3" role=contentinfo><div class="center relative max-w-4xl mx-auto px-4 sm:px-12 py-16"><section class=mb-4><h1 class="text-2xl uppercase">ABOUT</h1><p>Hi! I'm Suresh. Your host. You can get to know me better in the
<a class="link white dim" href=/about>about</a> section or follow me
using the social media icons on the right</p><div><div class=ananke-socials><a href=https://twitter.com/sureshssarda target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window">Twitter</a>
<a href=https://github.com/sureshsarda target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window">GitHub</a>
<a href=https://www.linkedin.com/in/sureshsarda/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window">LinkedIn</a>
<a href=https://sureshssarda.medium.com/ target=_blank class="medium ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Medium link" rel=noopener aria-label="follow on Medium——Opens in a new window">Medium</a></div></div></section><section class=mb-4><h1 class="text-2xl uppercase">categories</h1><a class=hover:text-gray-400 href=/categories/linux>linux (6)</a></section><section class=mb-4><h1 class="text-2xl uppercase">tags</h1><a class=hover:text-gray-400 href=/tags/ai>ai (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-hadoop>apache-hadoop (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-kafka>apache-kafka (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-spark>apache-spark (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-storm>apache-storm (1)</a>
<a class=hover:text-gray-400 href=/tags/big-data>big-data (1)</a>
<a class=hover:text-gray-400 href=/tags/clean-code>clean-code (3)</a>
<a class=hover:text-gray-400 href=/tags/containers>containers (1)</a>
<a class=hover:text-gray-400 href=/tags/data>data (1)</a>
<a class=hover:text-gray-400 href=/tags/design-patterns>design-patterns (2)</a>
<a class=hover:text-gray-400 href=/tags/docker>docker (2)</a>
<a class=hover:text-gray-400 href=/tags/elasticsearch>elasticsearch (5)</a>
<a class=hover:text-gray-400 href=/tags/java>java (11)</a>
<a class=hover:text-gray-400 href=/tags/linux>linux (11)</a>
<a class=hover:text-gray-400 href=/tags/linux-kernel>linux-kernel (1)</a>
<a class=hover:text-gray-400 href=/tags/notes>notes (1)</a>
<a class=hover:text-gray-400 href=/tags/performance>performance (1)</a>
<a class=hover:text-gray-400 href=/tags/power-unix-tools>power-unix-tools (1)</a>
<a class=hover:text-gray-400 href=/tags/programming>programming (2)</a>
<a class=hover:text-gray-400 href=/tags/python>python (3)</a>
<a class=hover:text-gray-400 href=/tags/reflection>reflection (1)</a>
<a class=hover:text-gray-400 href=/tags/research-paper>research-paper (2)</a>
<a class=hover:text-gray-400 href=/tags/sdlc>sdlc (1)</a>
<a class=hover:text-gray-400 href=/tags/spring>spring (2)</a>
<a class=hover:text-gray-400 href=/tags/unit-testing>unit-testing (1)</a></section><section class="mb-4 text-gray-400"><a href=/>&copy; Suresh Sarda 2022</a>
<span>Hosted on Github. Created using Tailwind CSS and Hugo.</span></section></div></div></footer></body></html>