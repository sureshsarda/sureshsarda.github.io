<!doctype html><html lang=en-us class=dark><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Why you should not use null as a method parameter | s9a.me</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Why passing null as a method parameter breaks the abstraction paradigm and how you should avoid it."><meta name=generator content="Hugo 0.109.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&family=Source+Sans+Pro:wght@200;300;400;700;900&display=swap"><meta property="og:title" content="Why you should not use null as a method parameter"><meta property="og:description" content="Why passing null as a method parameter breaks the abstraction paradigm and how you should avoid it."><meta property="og:type" content="article"><meta property="og:url" content="/posts/2020-01-06-design-oop-avoid-using-nulls-method-argument/"><meta property="og:image" content="/images/slipbox.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-06T00:00:00+00:00"><meta property="article:modified_time" content="2020-01-06T00:00:00+00:00"><meta property="og:site_name" content="sureshsarda.me"><meta itemprop=name content="Why you should not use null as a method parameter"><meta itemprop=description content="Why passing null as a method parameter breaks the abstraction paradigm and how you should avoid it."><meta itemprop=datePublished content="2020-01-06T00:00:00+00:00"><meta itemprop=dateModified content="2020-01-06T00:00:00+00:00"><meta itemprop=wordCount content="683"><meta itemprop=image content="/images/slipbox.jpg"><meta itemprop=keywords content="java,clean code,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/images/slipbox.jpg"><meta name=twitter:title content="Why you should not use null as a method parameter"><meta name=twitter:description content="Why passing null as a method parameter breaks the abstraction paradigm and how you should avoid it."></head><body class="bg-slate-100 dark:bg-slate-900"><main><article class="center bg-white relative max-w-4xl mx-auto px-12 py-16"><header class="border-b-2 mb-8"><aside><a href=/ class="font-semibold text-base uppercase text-sky-700">HOME</a>
<a href=/category/essay class="font-semibold text-base uppercase text-sky-700">&bull; ESSAY</a></aside><h1 class="text-5xl my-4">Why you should not use null as a method parameter</h1><div class=mb-12><time class="text-base text-gray-700" datetime=2020-01-06T00:00:00Z>January 6, 2020</time></div></header><div class=prose><p>Object Oriented concept was first introduced with <a href=https://en.wikipedia.org/wiki/Lisp_(programming_language)>Lisp</a> in the late 1950s. Lisp has atoms and attributes, where the atoms represented an real world object. OOP has evolved quite a bit after that. <a href=https://en.wikipedia.org/wiki/SOLID>SOLID</a> design principle were introduced that helped us craft a better software. I will not go in details of <a href=https://stackoverflow.com/questions/20073023/understanding-the-practical-benefits-of-using-the-single-responsibility-principl>how these principles help us, there is already lot of material out there</a>. Instead I&rsquo;ll focus on some mistakes we do while implementing these patterns. One of them is passing <code>null</code> as a method parameter especially when the called method doesn&rsquo;t use that parameter or has some default behavior.</p><h2 id=what-are-we-talking-about>What are we talking about?</h2><p>Let&rsquo;s take a simple example to elaborate this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IdentityProvider</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> User <span style=color:#a6e22e>login</span><span style=color:#f92672>(</span>String username<span style=color:#f92672>,</span> String password<span style=color:#f92672>,</span> String type<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// other methods
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>The anti-pattern which I&rsquo;m talking about uses <code>null</code> as a flag to toggle behavior. For example, take the following usages:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 1. A valid type is passsed
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>idp<span style=color:#f92672>.</span><span style=color:#a6e22e>login</span><span style=color:#f92672>(</span><span style=color:#960050;background-color:#1e0010>&#39;</span>username<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>password<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> AccountType<span style=color:#f92672>.</span><span style=color:#a6e22e>ADMIN</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2. Using null to take default value
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>idp<span style=color:#f92672>.</span><span style=color:#a6e22e>login</span><span style=color:#f92672>(</span><span style=color:#960050;background-color:#1e0010>&#39;</span>username<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>password<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span></code></pre></div><p>The first call here is absolutely fine. But in the second call we are passing <code>null</code> so that the login is attempted against the standard/default account type.</p><h2 id=whats-wrong-with-this>What&rsquo;s wrong with this?</h2><p>This type of call violate a fundamental design principle - <a href=https://en.wikipedia.org/wiki/Abstraction_(computer_science)>abstraction</a>. Let&rsquo;s take an example to understand how.</p><h3 id=the-carpenter-and-the-table>The Carpenter and the table</h3><pre tabindex=0><code>You: Hey! I need a table, can you make me one?
Carpenter: Sure, I&#39;ll need some wood, screws and glue.
You: Oh Okay! I have wood and screws but I didn&#39;t get glue.
Carpenter: No problem, we can make one without glue. I&#39;ll just put more screws for the strength.
You: Awesome! Here you go!
(and you hand over the *ingredients* to the carpenter and get your table)
</code></pre><p>In programming, one might call the <code>makeTable</code> method like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>carpenter<span style=color:#f92672>.</span><span style=color:#a6e22e>makeTable</span><span style=color:#f92672>(</span>wood<span style=color:#f92672>,</span> screw<span style=color:#f92672>,</span> glue<span style=color:#f92672>);</span>
</span></span></code></pre></div><p>Note that <code>glue</code> is optional, so someone can call the method like this as well:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>carpenter<span style=color:#f92672>.</span><span style=color:#a6e22e>makeTable</span><span style=color:#f92672>(</span>wood<span style=color:#f92672>,</span> screw<span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
</span></span></code></pre></div><h3 id=so-whats-wrong>So what&rsquo;s wrong?</h3><p>Well, you know the implementation details, <em>that&rsquo;s wrong</em>. The <code>makeTable</code> method is not abstract any more because <em>you know</em> that you can pass <code>null</code> and it will work fine. <em>You know</em> that internally it can work without <em>glue</em>.</p><p>When methods are declared with parameters, it marks a contract that, <em>that</em> method needs those argument to work correctly. If you were just a user of a third party library, you would not know that glue is required or not. You would have 2 options - read to docs if it says whether it can take <code>null</code> or figure it out by trial and error; in both the cases you are trying to know whether it works without glue and in both the cases you will have some idea about the internal implementation.</p><h2 id=how-to-fix-it>How to fix it?</h2><p>One simple way to fix it using method overloading:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Table <span style=color:#a6e22e>makeTable</span><span style=color:#f92672>(</span>Wood wood<span style=color:#f92672>,</span> Screw screws<span style=color:#f92672>,</span> Glue glue<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>Table <span style=color:#a6e22e>makeTable</span><span style=color:#f92672>(</span>Wood wood<span style=color:#f92672>,</span> Screw screws<span style=color:#f92672>);</span>
</span></span></code></pre></div><p>The other one is having a separate method for without glue:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Table <span style=color:#a6e22e>makeTable</span><span style=color:#f92672>(</span>Wood wood<span style=color:#f92672>,</span> Screw screws<span style=color:#f92672>,</span> Glue glue<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>Table <span style=color:#a6e22e>makeTableWithoutGlue</span><span style=color:#f92672>(</span>Wood wood<span style=color:#f92672>,</span> Screw screws<span style=color:#f92672>);</span>
</span></span></code></pre></div><p>There could be many more way to fix the design. But these are probably the simplest one. It makes the code clearer. It leaves less space for errors and assumptions.</p><h2 id=dont-get-me-wrong>Don&rsquo;t get me wrong!</h2><p>Don&rsquo;t get me wrong. Internally the second method might call the first method with a <code>null</code> argument. But that&rsquo;s <em>internally</em>. That&rsquo;s the implementation of the carpenter class and the guy implementing is aware of it. <strong>The null paradigm should not go outside the class/library. Not to the programmer using it.</strong></p><p>You will wonder that I&rsquo;m not an API designer, neither anyone else apart from my team is using the code we have written. Why should I do this? Well, it has the same benefits as other design principles - <a href=https://en.wikipedia.org/wiki/SOLID>SOLID</a>, <a href=https://en.wikipedia.org/wiki/KISS_principle>KISS</a>, etc - helps with writing maintainable and clean code. In one part of the code we might be a API designer while in some other part we might be user for that API. We have to interchangeably wear those 2 hats multiple times a day. In fact multiple times in an hour.</p></div><a class="text-sky-600 mr-2" href=/tags/java>#java</a>
<a class="text-sky-600 mr-2" href=/tags/clean-code>#clean code</a><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=/posts/2020-01-06-design-oop-avoid-using-nulls-method-argument/&text=Why%20you%20should%20not%20use%20null%20as%20a%20method%20parameter" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=/posts/2020-01-06-design-oop-avoid-using-nulls-method-argument/&title=Why%20you%20should%20not%20use%20null%20as%20a%20method%20parameter" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"></a></div><aside><div class="border-t-2 py-4"><p class="text-2xl font-bold">See Also</p><ul><li><a class="hover:underline hover:text-gray-500" href=/posts/2022-12-17-proxy-new-instance-json-mock-utility/>Create a service mocking framework around Proxy.newProxyInstance</a></li><li><a class="hover:underline hover:text-gray-500" href=/posts/2021-11-30-design-patterns-for-container-application/>Design Patterns for Container Based Distributed Systems</a></li><li><a class="hover:underline hover:text-gray-500" href=/java/convert-string-title-case-java-streams/>Convert String to title case in Java using Streams</a></li></ul></div></aside></article></main><footer class="bg-black dark:bg-slate-900 text-white bottom-0 w-100 pa3" role=contentinfo><div class="center relative max-w-4xl mx-auto px-12 py-16"><section class=mb-4><h1 class="text-2xl uppercase">ABOUT</h1><p>Hi! I'm Suresh. Your host. You can get to know me better in the
<a class="link white dim" href=/about>about</a> section or follow me
using the social media icons on the right</p><div><div class=ananke-socials><a href=https://twitter.com/sureshssarda target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window">Twitter</a>
<a href=https://github.com/sureshsarda target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window">GitHub</a>
<a href=https://www.linkedin.com/in/sureshsarda/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window">LinkedIn</a>
<a href=https://sureshssarda.medium.com/ target=_blank class="medium ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Medium link" rel=noopener aria-label="follow on Medium——Opens in a new window">Medium</a></div></div></section><section class=mb-4><h1 class="text-2xl uppercase">categories</h1><a class=hover:text-gray-400 href=/categories/linux>linux (6)</a></section><section class=mb-4><h1 class="text-2xl uppercase">tags</h1><a class=hover:text-gray-400 href=/tags/ai>ai (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-hadoop>apache-hadoop (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-kafka>apache-kafka (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-spark>apache-spark (1)</a>
<a class=hover:text-gray-400 href=/tags/apache-storm>apache-storm (1)</a>
<a class=hover:text-gray-400 href=/tags/big-data>big-data (1)</a>
<a class=hover:text-gray-400 href=/tags/clean-code>clean-code (3)</a>
<a class=hover:text-gray-400 href=/tags/containers>containers (1)</a>
<a class=hover:text-gray-400 href=/tags/data>data (1)</a>
<a class=hover:text-gray-400 href=/tags/design-patterns>design-patterns (2)</a>
<a class=hover:text-gray-400 href=/tags/docker>docker (2)</a>
<a class=hover:text-gray-400 href=/tags/elasticsearch>elasticsearch (5)</a>
<a class=hover:text-gray-400 href=/tags/java>java (11)</a>
<a class=hover:text-gray-400 href=/tags/linux>linux (11)</a>
<a class=hover:text-gray-400 href=/tags/linux-kernel>linux-kernel (1)</a>
<a class=hover:text-gray-400 href=/tags/notes>notes (1)</a>
<a class=hover:text-gray-400 href=/tags/performance>performance (1)</a>
<a class=hover:text-gray-400 href=/tags/power-unix-tools>power-unix-tools (1)</a>
<a class=hover:text-gray-400 href=/tags/programming>programming (2)</a>
<a class=hover:text-gray-400 href=/tags/python>python (3)</a>
<a class=hover:text-gray-400 href=/tags/reflection>reflection (1)</a>
<a class=hover:text-gray-400 href=/tags/research-paper>research-paper (2)</a>
<a class=hover:text-gray-400 href=/tags/sdlc>sdlc (1)</a>
<a class=hover:text-gray-400 href=/tags/spring>spring (2)</a>
<a class=hover:text-gray-400 href=/tags/unit-testing>unit-testing (1)</a></section><section class="mb-4 text-gray-400"><a href=/>&copy; Suresh Sarda 2022</a>
<span>Hosted on Github. Created using Tailwind CSS and Hugo.</span></section></div></div></footer></body></html>