<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  
  <title>Solution to Leetcode - Happy Number</title>
  <meta property="og:title" content="Solution to Leetcode - Happy Number" />
  <meta name="twitter:title" content="Solution to Leetcode - Happy Number" />
  

  
  <meta name="description" content="Solution to Leetcode&#39;s Happy Number problem. Write an algorithm to determine if a number is &#34;happy&#34;.">
  <meta property="og:description" content="Solution to Leetcode&#39;s Happy Number problem. Write an algorithm to determine if a number is &#34;happy&#34;.">
  <meta name="twitter:description" content="Solution to Leetcode&#39;s Happy Number problem. Write an algorithm to determine if a number is &#34;happy&#34;.">
  

  <meta name="author" content=""/>
  <meta property="og:site_name" content="Programming Notes" />
  <meta property="og:url" content="https://sureshsarda.github.io/problem-solving/leetcode/solution-happy-number/" />

  
  <meta name="twitter:card" content="summary" />

  

  
  <meta property="og:type" content="article" />
  
  
  
  <meta name="generator" content="Hugo 0.80.0" />
  
  

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;300;500;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Oxygen&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">


  <link rel="stylesheet" href="https://sureshsarda.github.io/assets/css/style.css" />
  <link rel="stylesheet" href="https://sureshsarda.github.io/assets/css/custom.css" />
  
  
  
  <script type="text/javascript" src="https://sureshsarda.github.io/assets/js/bundle.js"></script>
</head>




<body>
    <article class="container">
        <header>
            

            
                <p>
                    <a href="/">Programming Notes</a>
                </p>
                <h1>Solution to Leetcode - Happy Number</h1>
                
            
            
        </header>





        <main id="js-article" class="container">
            <div class="row">

                <div class="col-9 py-5">
                    <p>As part of 30 days challenge during the Corono pandemic, Leetcode published this problem on the second day:</p>
<blockquote>
<p>A happy number is a number defined by the following process: Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers.</p>
</blockquote>
<h2 id="explanation">Explanation</h2>
<p>Happy Number = repeated sum of squares of digits will end in 1
Non Happy Number = repeated sum of squares will lead in an infinite loop.</p>
<h2 id="thought-process-for-solution">Thought Process for Solution</h2>
<p>The main task is to figure out when to stop out of the infinite loop and conclude that a number is not happy. Once you can figure this out, the code is not very tricky.</p>
<p>Let&rsquo;s look at a sequence of a unhappy number, 42:</p>
<pre><code>    input   = 42
=&gt; 16 + 4   = 20
=&gt; 4 + 0    = 4
=&gt; 16       = 16
=&gt; 1 + 36   = 37
=&gt; 9 + 49   = 56
=&gt; 25 + 36  = 61
=&gt; 36 + 1   = 37
</code></pre><p>It&rsquo;s evident from 37 that it will start to loop again from the 37 we have already seen. This is important. We can now stop iterating because any number of time we try 37, it&rsquo;s going to give same sequence <code>37 -&gt; 56 -&gt; 61 -&gt; 37 -&gt; 56 -&gt; ...</code>.</p>
<p>From here, the solution is simple, keep a track of already seen numbers and when ever a new number is found, add it to this set. We are good till the numbers are unique, but if we find a number we have already seen, that means we have detected a loop.</p>
<h3 id="pseudo-code">Pseudo Code</h3>
<pre><code>seen = {}
while number not in already seen and number is not 1:
    find square of digits of number
    add it to seen 
</code></pre><h2 id="code">Code</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HappyNumber</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n <span style="color:#f92672">&lt;=</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        Set<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> alreadySeen <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> TreeSet<span style="color:#f92672">&lt;&gt;();</span>

        <span style="color:#66d9ef">int</span> current <span style="color:#f92672">=</span> n<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>alreadySeen<span style="color:#f92672">.</span><span style="color:#a6e22e">contains</span><span style="color:#f92672">(</span>current<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> current <span style="color:#f92672">!=</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            alreadySeen<span style="color:#f92672">.</span><span style="color:#a6e22e">add</span><span style="color:#f92672">(</span>current<span style="color:#f92672">);</span>
            current <span style="color:#f92672">=</span> squareOfDigits<span style="color:#f92672">(</span>current<span style="color:#f92672">);</span>

        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> current <span style="color:#f92672">==</span> 1<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> number<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> digits <span style="color:#f92672">=</span> intToDigits<span style="color:#f92672">(</span>number<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> IntStream<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>digits<span style="color:#f92672">).</span><span style="color:#a6e22e">reduce</span><span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> <span style="color:#f92672">(</span>a<span style="color:#f92672">,</span> b<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> a <span style="color:#f92672">+</span> b <span style="color:#f92672">*</span> b<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> number<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> String<span style="color:#f92672">.</span><span style="color:#a6e22e">valueOf</span><span style="color:#f92672">(</span>number<span style="color:#f92672">).</span><span style="color:#a6e22e">chars</span><span style="color:#f92672">().</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span>it <span style="color:#f92672">-&gt;</span> it <span style="color:#f92672">-</span> <span style="color:#e6db74">&#39;0&#39;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">toArray</span><span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><h2 id="some-test-cases-to-validate">Some test cases to validate</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HappyNumberTest</span> <span style="color:#66d9ef">extends</span> TestCase <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testIntToDigits</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>0<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>0<span style="color:#f92672">));</span>
        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>1<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>1<span style="color:#f92672">));</span>
        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>2<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>2<span style="color:#f92672">));</span>

        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>1<span style="color:#f92672">,</span> 0<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>10<span style="color:#f92672">));</span>
        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>2<span style="color:#f92672">,</span> 2<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>22<span style="color:#f92672">));</span>
        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>9<span style="color:#f92672">,</span> 9<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>99<span style="color:#f92672">));</span>

        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> 0<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>100<span style="color:#f92672">));</span>
        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>1<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> 1<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>101<span style="color:#f92672">));</span>
        assertArrayEquals<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]{</span>5<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> 0<span style="color:#f92672">},</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">intToDigits</span><span style="color:#f92672">(</span>500<span style="color:#f92672">));</span>

    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testSquareOfDigits</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        assertEquals<span style="color:#f92672">(</span>0<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>0<span style="color:#f92672">));</span>
        assertEquals<span style="color:#f92672">(</span>1<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>1<span style="color:#f92672">));</span>
        assertEquals<span style="color:#f92672">(</span>9<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>3<span style="color:#f92672">));</span>
        assertEquals<span style="color:#f92672">(</span>25<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>5<span style="color:#f92672">));</span>

        assertEquals<span style="color:#f92672">(</span>29<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>25<span style="color:#f92672">));</span>
        assertEquals<span style="color:#f92672">(</span>37<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>16<span style="color:#f92672">));</span>
        assertEquals<span style="color:#f92672">(</span>145<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>89<span style="color:#f92672">));</span>
        assertEquals<span style="color:#f92672">(</span>42<span style="color:#f92672">,</span> HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">squareOfDigits</span><span style="color:#f92672">(</span>145<span style="color:#f92672">));</span>

    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">testIsHappy</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        assertTrue<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>1<span style="color:#f92672">));</span>
        assertTrue<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>10<span style="color:#f92672">));</span>
        assertTrue<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>100<span style="color:#f92672">));</span>
        assertTrue<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>13<span style="color:#f92672">));</span>
        assertTrue<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>31<span style="color:#f92672">));</span>
        assertTrue<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>19<span style="color:#f92672">));</span>

        assertFalse<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>25<span style="color:#f92672">));</span>
        assertFalse<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>145<span style="color:#f92672">));</span>
        assertFalse<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>41<span style="color:#f92672">));</span>
        assertFalse<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>42<span style="color:#f92672">));</span>
        assertFalse<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>0<span style="color:#f92672">));</span>
        assertFalse<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>99<span style="color:#f92672">));</span>
        assertFalse<span style="color:#f92672">(</span>HappyNumber<span style="color:#f92672">.</span><span style="color:#a6e22e">isHappy</span><span style="color:#f92672">(</span>573<span style="color:#f92672">));</span>

    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>It&rsquo;s an interesting problem with a very simple solution. Once you get the bright idea behind how to stop the loop, the solution becomes evident.</p>


                </div>
                <aside class="bd-toc toc col-2 py-5">
                    <div class="sticky-top pt-5">
                        <h3>On this page</h3>
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#explanation">Explanation</a></li>
    <li><a href="#thought-process-for-solution">Thought Process for Solution</a>
      <ul>
        <li><a href="#pseudo-code">Pseudo Code</a></li>
      </ul>
    </li>
    <li><a href="#code">Code</a></li>
    <li><a href="#some-test-cases-to-validate">Some test cases to validate</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
                    </div>
                </aside>
            </div>

            


        </main>

        
    </article>
    <footer class="mt-5 py-5">
    <div class="container py-5">
        
        <div class="row">
            <div class="col-lg-4 mb-3">
                <h3>
                    <a href="/">Programming Notes</a>
                </h3>
                <ul class="list-unstyled">
                    <li>Share the knowledge that you can and learn more in the process.</li>
                </ul>

            </div>
            <div class="col-lg-1"></div>
            
            
            <div class="col-lg-2">
                <h5>Curated</h5>
                <ul class="list-unstyled">
                    
                    <li class="mb-2"><a href="/blog">Blog</a></li>
                    
                    <li class="mb-2"><a href="/books">Books</a></li>
                    
                    <li class="mb-2"><a href="/papers">Papers</a></li>
                    
                </ul>
            </div>
            
            
            
            <div class="col-lg-2">
                <h5>Links</h5>
                <ul class="list-unstyled">
                    
                    <li class="mb-2"><a href="/series">Article Series</a></li>
                    
                    <li class="mb-2"><a href="/categories">Categories</a></li>
                    
                    <li class="mb-2"><a href="/posts">Posts</a></li>
                    
                    <li class="mb-2"><a href="/tags">Tags</a></li>
                    
                </ul>
            </div>
            
            
            
            <div class="col-lg-2">
                <h5>Social</h5>
                <ul class="list-unstyled">
                    
                    <li class="mb-2"><a href="/">Github</a></li>
                    
                    <li class="mb-2"><a href="/">LinkedIn</a></li>
                    
                    <li class="mb-2"><a href="/">Medium</a></li>
                    
                    <li class="mb-2"><a href="/">Stack Overflow</a></li>
                    
                    <li class="mb-2"><a href="/">Twitter</a></li>
                    
                </ul>
            </div>
            
            
        </div>
        
    </div>

    <div class="p-copyright">
        
        Suresh Sarda
        &nbsp;&bull;&nbsp;
        2020

        
        &nbsp;&bull;&nbsp;
        <a href="https://sureshsarda.github.io/">Programming Notes</a>
        
        
    </div>
</footer>