<!doctype html><html lang=en-us class=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Insert, Index document in Elasticsearch using Java | s9a.me</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="In this article we will see how to insert a document in Elasticsearch using the High Level Client provided by Elasticsearch.
Prepare the Index Request Elasticsearch client accepts IndexRequest to insert documents. Two required details for this request are:
Name of the index Document source Everything else can take default value. We will stick to the easy path to create our very first document and explore other optional arguments later."><meta name=generator content="Hugo 0.124.1"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inria+Serif:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap" rel=stylesheet><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&family=Source+Sans+Pro:wght@200;300;400;700;900&display=swap"><meta property="og:title" content="Insert, Index document in Elasticsearch using Java"><meta property="og:description" content="In this article we will see how to insert a document in Elasticsearch using the High Level Client provided by Elasticsearch.
Prepare the Index Request Elasticsearch client accepts IndexRequest to insert documents. Two required details for this request are:
Name of the index Document source Everything else can take default value. We will stick to the easy path to create our very first document and explore other optional arguments later."><meta property="og:type" content="article"><meta property="og:url" content="https://s9a.me/elasticsearch/insert-index-document-elasticsearch-java/"><meta property="og:image" content="https://s9a.me/images/slipbox.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-11-27T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-23T08:42:37+05:30"><meta property="og:site_name" content="sureshsarda.me"><meta itemprop=name content="Insert, Index document in Elasticsearch using Java"><meta itemprop=description content="In this article we will see how to insert a document in Elasticsearch using the High Level Client provided by Elasticsearch.
Prepare the Index Request Elasticsearch client accepts IndexRequest to insert documents. Two required details for this request are:
Name of the index Document source Everything else can take default value. We will stick to the easy path to create our very first document and explore other optional arguments later."><meta itemprop=datePublished content="2019-11-27T00:00:00+00:00"><meta itemprop=dateModified content="2022-08-23T08:42:37+05:30"><meta itemprop=wordCount content="426"><meta itemprop=image content="https://s9a.me/images/slipbox.jpg"><meta itemprop=keywords content="Elasticsearch,Java,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://s9a.me/images/slipbox.jpg"><meta name=twitter:title content="Insert, Index document in Elasticsearch using Java"><meta name=twitter:description content="In this article we will see how to insert a document in Elasticsearch using the High Level Client provided by Elasticsearch.
Prepare the Index Request Elasticsearch client accepts IndexRequest to insert documents. Two required details for this request are:
Name of the index Document source Everything else can take default value. We will stick to the easy path to create our very first document and explore other optional arguments later."></head><body class="bg-slate-100 dark:bg-slate-900"><main><article class="center bg-white relative max-w-4xl mx-auto px-12 py-16"><header class="border-b-2 mb-8 pb-8"><aside class=print:hidden><a href=/ class="font-semibold text-base uppercase text-sky-600 hover:text-sky-900">HOME</a></aside><h1 class="text-5xl my-4">Insert, Index document in Elasticsearch using Java</h1><div class=mb-4><time class="text-base text-gray-700" datetime=2019-11-27T00:00:00Z>November 27, 2019</time></div><a class="text-sky-600 hover:text-sky-900 mr-2 print:hidden" href=/tags/elasticsearch>#elasticsearch
</a><a class="text-sky-600 hover:text-sky-900 mr-2 print:hidden" href=/tags/java>#java</a></header><div class=prose><p>In this article we will see how to insert a document in Elasticsearch using the High Level Client provided by Elasticsearch.</p><h2 id=prepare-the-index-request>Prepare the Index Request</h2><p>Elasticsearch client accepts <code>IndexRequest</code> to insert documents. Two required details for this request are:</p><ol><li>Name of the index</li><li>Document source</li></ol><p>Everything else can take default value. We will stick to the easy path to create our very first document and explore other optional arguments later.</p><p>There are multiple ways to provide the source of the document - using a map, using JSON string, using <code>XContent</code>, etc.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String body <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;{&#39;name&#39;: &#39;John Doe&#39;, &#39;age&#39;: 25, updated: &#39;2019-11-25&#39;}&#34;</span>;
</span></span><span style=display:flex><span>IndexRequest request <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> IndexRequest(<span style=color:#e6db74>&#34;users&#34;</span>);
</span></span><span style=display:flex><span>request.<span style=color:#a6e22e>source</span>(body, XContentType.<span style=color:#a6e22e>JSON</span>);
</span></span></code></pre></div><p>The request is ready to be inserted into Elasticsearch.</p><h2 id=insert-the-document>Insert the document</h2><p>Assuming you have the [connection established]({% post_url elasticsearch/2019-11-25-connecting-to-elasticsearch-from-java %}) you can just call the <code>index</code> method on the client.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>client.<span style=color:#a6e22e>index</span>(request, RequestOptions.<span style=color:#a6e22e>DEFAULT</span>);
</span></span></code></pre></div><p>Connection can be setup like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span> RestHighLevelClient client <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RestHighLevelClient(
</span></span><span style=display:flex><span>    RestClient.<span style=color:#a6e22e>builder</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> HttpHost(<span style=color:#e6db74>&#34;localhost&#34;</span>, 9200, <span style=color:#e6db74>&#34;http&#34;</span>)));
</span></span></code></pre></div><p>make sure you close the connection by calling <code>client.close()</code> once you are done using it.</p><h2 id=check-if-it-was-inserted>Check if it was inserted</h2><p>We will see in next articles how to retrieve documents from Elasticsearch. To quicky check if the document was inserted, we can run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl localhost:9200/users/_search?pretty
</span></span></code></pre></div><p>And this should give us the response with the document:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;took&#34;</span> : <span style=color:#ae81ff>24</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;timed_out&#34;</span> : <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;_shards&#34;</span> : {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;total&#34;</span> : <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;successful&#34;</span> : <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;skipped&#34;</span> : <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;failed&#34;</span> : <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;hits&#34;</span> : {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;total&#34;</span> : {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;value&#34;</span> : <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;relation&#34;</span> : <span style=color:#e6db74>&#34;eq&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;max_score&#34;</span> : <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;hits&#34;</span> : [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;_index&#34;</span> : <span style=color:#e6db74>&#34;users&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;_type&#34;</span> : <span style=color:#e6db74>&#34;_doc&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;_id&#34;</span> : <span style=color:#e6db74>&#34;ZAoIz24BnE_7WJlL7MOP&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;_score&#34;</span> : <span style=color:#ae81ff>1.0</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;_source&#34;</span> : {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;name&#34;</span> : <span style=color:#e6db74>&#34;John Doe&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;updated&#34;</span> : <span style=color:#e6db74>&#34;2019-12-04T03:51:38.797Z&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;age&#34;</span> : <span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=alternatives-to-create-a-document>Alternatives to create a document</h2><h3 id=inserting-document-from-a-map>Inserting document from a Map</h3><p>Many times we might have a Map serialized from some channel to be indexed in Elasticsearch. Elasticsearch provides helper method to insert a Map directly. This can be achieved like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>IndexRequest request <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> IndexRequest(<span style=color:#e6db74>&#34;users&#34;</span>);
</span></span><span style=display:flex><span>Map<span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> data <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>data.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;John Doe&#34;</span>);
</span></span><span style=display:flex><span>data.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;age&#34;</span>, 25);
</span></span><span style=display:flex><span>data.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;updated&#34;</span>, <span style=color:#66d9ef>new</span> Date());
</span></span><span style=display:flex><span>request.<span style=color:#a6e22e>source</span>(data);
</span></span></code></pre></div><h3 id=inserting-document-directly-using-key-values>Inserting document directly using key values</h3><p>Data can be directly entered in the request using key value in the source object like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>IndexRequest request <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> IndexRequest(<span style=color:#e6db74>&#34;users&#34;</span>);
</span></span><span style=display:flex><span>request.<span style=color:#a6e22e>source</span>(<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;John Doe&#34;</span>, <span style=color:#e6db74>&#34;age&#34;</span>, 25, <span style=color:#e6db74>&#34;updated&#34;</span>, <span style=color:#66d9ef>new</span> Date());
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>We saw how to insert a document in Elasticsearch using the Java client. Documents need the index name and the content. Documents can be created directly from JSON strings, Map or directly from key value pairs in the <code>source</code> method of the <code>IndexRequest</code>.</p></div><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://s9a.me/elasticsearch/insert-index-document-elasticsearch-java/&amp;text=Insert,%20Index%20document%20in%20Elasticsearch%20using%20Java" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"></a><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://s9a.me/elasticsearch/insert-index-document-elasticsearch-java/&amp;title=Insert,%20Index%20document%20in%20Elasticsearch%20using%20Java" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"></a></div><aside class="border-t-2 print:hidden"><p class=pt-4>Want to discuss this further? You can DM me via
<a class=text-sky-500 href=https://twitter.com/sureshssarda>Twitter</a>,
<a class=text-sky-500 href=https://www.linkedin.com/in/sureshsarda/>LinkedIn</a> or directly drop an
<a class=text-sky-500 href="mailto:sureshssarda@gmail.com?subject=Insert%2c%20Index%20document%20in%20Elasticsearch%20using%20Java">Email.</a></p></aside><aside class=print:hidden><div class=py-4><p class="text-2xl font-bold">You might want to read</p><ul class="list-disc list-inside my-4"><li><a class="hover:underline hover:text-gray-500" href=/elasticsearch/search-match-all-from-java-using-high-level-client/>Search Elasticsearch from Java using High Level Client</a></li><li><a class="hover:underline hover:text-gray-500" href=/elasticsearch/connect-from-java-using-high-level-client/>Connect to Elasticsearch using Java High Level Client</a></li><li><a class="hover:underline hover:text-gray-500" href=/java/creating-csv-from-strings/>Creating CSV from Strings in Java</a></li></ul></div></aside></article></main><footer class="bg-black dark:bg-slate-900 text-white bottom-0 w-100 pa3 print:hidden" role=contentinfo><div class="center relative max-w-4xl mx-auto px-12 py-16"><section class=mb-4><h1 class="text-2xl uppercase hover:text-gray-300 hover:underline"><a href=/about>About</a></h1><p>Hi! I'm Suresh. Your host. You can get to know me better in the
<a class="hover:text-gray-500 hover:underline" href=/about>about</a> section or follow me
using the social media icons on the right</p><div><div class=ananke-socials><a href=https://twitter.com/sureshssarda target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window">Twitter
</a><a href=https://github.com/sureshsarda target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window">GitHub
</a><a href=https://www.linkedin.com/in/sureshsarda/ target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window">LinkedIn
</a><a href=https://sureshssarda.medium.com/ target=_blank class="medium ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Medium link" rel=noopener aria-label="follow on Medium——Opens in a new window">Medium</a></div></div></section><section class=mb-4><h1 class="text-2xl uppercase hover:text-gray-300 hover:underline"><a href=/categories>categories</a></h1><a class="hover:text-gray-400 hover:underline" href=/categories/linux>linux (6)</a></section><section class=mb-4><h1 class="text-2xl uppercase hover:text-gray-300 hover:underline"><a href=/tags>tags</a></h1><a class="hover:text-gray-400 hover:underline" href=/tags/ai>ai (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-hadoop>apache hadoop (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-kafka>apache kafka (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-spark>apache spark (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/apache-storm>apache storm (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/big-data>big data (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/clean-code>clean code (5)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/concurrency>concurrency (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/containers>containers (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/data>data (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/database-management>database-management (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/databases>databases (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/design>design (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/design-patterns>design patterns (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/distributed-databases>distributed-databases (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/docker>docker (4)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/elasticsearch>elasticsearch (5)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/google>google (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/gradle>gradle (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/idea>idea (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/java>java (15)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/linux>linux (12)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/mvcc>mvcc (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/networking>networking (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/note-taking>note taking (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/notes>notes (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/paxos>paxos (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/performance>performance (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/power-unix-tools>power-unix-tools (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/programming>programming (9)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/python>python (3)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/reflection>reflection (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/research-paper>research-paper (3)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/sdlc>sdlc (3)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/spring>spring (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/systems>systems (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/testing>testing (2)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/transaction-processing>transaction-processing (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/two-phase-commit>two-phase-commit (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/vscode>vscode (1)</a>
<a class="hover:text-gray-400 hover:underline" href=/tags/writing-well>writing-well (2)</a></section><section class="mb-4 text-gray-400"><a href=https://s9a.me/>&copy; Suresh Sarda 2024</a><p class="text-sm text-gray-500">Hosted on
<a class="hover:text-gray-300 hover:underline" href=https://github.com/sureshsarda/sureshsarda.github.io>Github</a>. Handcrafted using
<a class="hover:text-gray-300 hover:underline" href=https://gohugo.io/>Hugo</a> and
<a class="hover:text-gray-300 hover:underline" href=https://tailwindcss.com/>Tailwind</a>. (Version )</p></section></div></div></footer></body></html>